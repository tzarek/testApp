@model PagedList.IPagedList<TestApp.Models.Film>
@using PagedList.Mvc;

<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "Home Page";
}

<div class="col-md-12">
    <h3 align="center">Каталог фильмов</h3>
</div>

<div>
    <td><p><a href="/Films/Create" class="btn btn-primary">Добавить фильм</a></p></td>
</div>

<div class="col-md-12">

    <table id="filmsTable" class="table">
        <tr class="header">
            <td class="col-md-2"><p>Название фильма</p></td>
            <td class="col-md-2"><p>Описание</p></td>
            <td class="col-md-2"><p>Год выпуска</p></td>
            <td>Постер</td>
            <td></td>
        </tr>
        @foreach (TestApp.Models.Film f in Model)
        {
            <tr>
                <td><p>@f.Name</p></td>
                <td><p>@f.Description</p></td>
                <td><p>@f.Year</p></td>

                @{ if (f.Poster != null)
                    {
                        <td>
                            @{

                                var base64 = Convert.ToBase64String(f.Poster);
                                var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                            }
                            <img src="@imgSrc" class="img-thumbnail" style="max-height: 200px" />
                        </td>
                    }
                }
                
                <td><p><a href="/Films/Get/@f.Id">Подробнее</a></p></td>                    

            </tr>
        }
    </table>
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

    @Html.PagedListPager(Model, page => Url.Action("Index",
        new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
</div>

@*<div class="row">
    <div class="col-md-4">
        <h2>Getting started</h2>
        <p>
            ASP.NET MVC gives you a powerful, patterns-based way to build dynamic websites that
            enables a clean separation of concerns and gives you full control over markup
            for enjoyable, agile development.
        </p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301865">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Get more libraries</h2>
        <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301866">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Web Hosting</h2>
        <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
        <p><a class="btn btn-default" href="https://go.microsoft.com/fwlink/?LinkId=301867">Learn more &raquo;</a></p>
    </div>
</div>*@
